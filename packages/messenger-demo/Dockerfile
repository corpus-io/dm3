FROM node:18-alpine
WORKDIR /app
COPY . .
ENV REACT_APP_DEFAULT_SERVICE REACT_APP_DEFAULT_SERVICE
ENV REACT_APP_ETHEREUM_PROVIDER REACT_APP_ETHEREUM_PROVIDER
ENV REACT_APP_WALLET_CONNECT_PROJECT_ID REACT_APP_WALLET_CONNECT_PROJECT_ID
ENV REACT_APP_ADDR_ENS_SUBDOMAIN REACT_APP_ADDR_ENS_SUBDOMAIN
ENV REACT_APP_BACKEND REACT_APP_BACKEND
ENV REACT_APP_DEFAULT_DELIVERY_SERVICE REACT_APP_DEFAULT_DELIVERY_SERVICE
ENV REACT_APP_PROFILE_BASE_URL REACT_APP_PROFILE_BASE_URL
ENV REACT_APP_RESOLVER_BACKEND REACT_APP_RESOLVER_BACKEND
ENV REACT_APP_USER_ENS_SUBDOMAIN REACT_APP_USER_ENS_SUBDOMAIN
ENV RESOLVER_ADDR RESOLVER_ADDR
RUN apk add --update python3 make g++\
   && rm -rf /var/cache/apk/*
RUN yarn install
RUN yarn build
CMD   yarn workspace messenger-demo start
EXPOSE 3000